@page
@model RandomModel
@{

}


<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    MathJax = {
        options: {
            menuOptions: {
                settings: {
                    renderer: 'SVG',     // CHTML or 'SVG'
                }
            }
        }
    };
</script>

<script>
    // btn onclicks

    var areStepsVisible = false;

    function ToggleSteps() {
        const shouldTheyBeVisible = !areStepsVisible;
        areStepsVisible = shouldTheyBeVisible;

        const steps = document.querySelector('#steps');
        steps.style.display = shouldTheyBeVisible ? "block" : "none";

        const btn = document.querySelector("#showStepsBtn");
        btn.value = shouldTheyBeVisible ? "Lépések elrejtése" : "Lépések mutatása";
    }

    function ShowSolution() {
        const solution = document.querySelector('#solution');
        solution.style.display = "block";

        const btn = document.querySelector("#showSolutionBtn");
        btn.style.display = "none";
    }

</script>

<div class="my-container">

    <h1>
        Nem hiszed? <span class="derivald">Deriváld le!</span>
    </h1>


    <div class="math-wrapper">

        <form method="post">
            <fieldset>
                <div class="derivative-wrapper">
                    <select class="level-select" name="level" >
                        <option value="easy">Könnyű</option>
                        <option value="medium">Közepes</option>
                        <option value="hard">Nehéz</option>
                        <option value="hardcore">Hardcore</option>
                    </select>
                    <label>&nbsp;</label>
                    <input class="button" placeholder="f(x) = sin(x)" type="submit" value="Deriváljunk!" class="submit" />
                </div>
            </fieldset>
        </form>

        <div class="output-wrapper">


                @{
                    if (HttpMethods.IsPost(Request.Method))
                    {

                        if (ViewData["errorString"] == "")
                        {
                            <div class="equation-wrapper">

                                <div>
                                    $$ @ViewData["prettyInput"] = @ViewData["prettySimplifiedInput"] $$
                                </div>

                                <input id="showSolutionBtn" class="button" type="button" onclick="javascript:ShowSolution()" value="Megoldás mutatása" />
                                        
                                <div id="solution" style="display:none;">
                                    $$ = @ViewData["derivativeOutput"] $$


                                    <ul id="steps" style="display:none;">
                                        @foreach (var step in ViewData["prettySteps"] as IList<string>)
                                        {
                                            <li>
                                                $$ = @step $$
                                            </li>
                                        }
                                    </ul>
                                    <input class="button" id="showStepsBtn" type="button" value="Mutasd a lépéseket" onclick="javascript:ToggleSteps()" />
                                </div>
                            </div>


                        }
                        else
                        {
                            <text>@ViewData["errorString"]</text>
                        }
                    }

                }

        </div>

    </div>

</div>
